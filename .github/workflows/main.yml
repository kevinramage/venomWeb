name: Integration tests
on: [push]
jobs:
  tests:
    strategy:
      matrix:
        # os: ubuntu-latest, macos-latest, windows-latest
        os: [ubuntu-latest, macos-latest, windows-latest]
        # chromeVersion: 112, 113, 114
        chromeVersion: ["112", "113", "114"]
    runs-on: ${{ matrix.os }}
    steps:
      - name: Setup venom web
        uses: actions/checkout@v3
        with:
          path: venomWeb
          ref: develop-tests
      - name: Setup Go
        uses: actions/setup-go@v4
        with:
          go-version: '1.20.3'
      - name: Setup Chrome
        uses: ./venomWeb/.github/actions/setup-chrome
        with:
          version: ${{ matrix.chromeVersion }}
      - name: Setup Chrome Driver
        uses: ./venomWeb/.github/actions/setup-chromedriver
        with:
          version: ${{ matrix.chromeVersion }}
      - name: Build venom
        uses: ./venomWeb/.github/actions/setup-venom
        with:
          venomVersion: v1.2.0-beta.1
          venomWebVersion: develop-tests
          plateform: ${{ matrix.os }}
      - name: Run venom
        uses: ./venomWeb/.github/actions/run-venom